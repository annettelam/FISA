<header>
  <nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800">
    <div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl">
      <!-- Logo -->
      <a href="http://localhost:4321/" class="flex items-center">
        <img src="/fisa_logo_small.png" class="mr-3 h-6 sm:h-9" alt="FISA Logo" />
      </a>

      <!-- Menu Links -->
      <div class="flex-grow lg:flex lg:w-auto lg:order-1 justify-center">
        <ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0">
          <li>
            <a href="#" class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-primary-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700">
              Home
            </a>
          </li>
          <li>
            <a href="https://fisabc.ca/" class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-primary-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700">
              FISA
            </a>
          </li>
          <li>
            <a href="/register" class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-primary-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700">
              Register
            </a>
          </li>
          <li>
            <a href="/about" class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-primary-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700">
              About
            </a>
          </li>
          <li>
            <a href="/contact" class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-primary-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700">
              Contact
            </a>
          </li>
        </ul>
      </div>

      <!-- Right Side: Dark Mode Toggle and Login -->
      <div class="flex items-center lg:order-2">
        <!-- Dark Mode Toggle -->
        <button id="theme-toggle" class="theme-toggle-btn">
          <span id="theme-toggle-icon"></span>
        </button>

        <!-- Login Button -->
        <a href="/login" class="text-gray-800 dark:text-white hover:bg-gray-50 focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-4 lg:px-5 py-2 lg:py-2.5 dark:hover:bg-gray-700 focus:outline-none dark:focus:ring-gray-800">
          Log in
        </a>
      </div>
    </div>
  </nav>

  <script is:inline>
    (function() {
      try {
        const theme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

        const themeToggleIcon = document.getElementById('theme-toggle-icon');

        function setIcon(theme) {
          if (theme === 'dark') {
            themeToggleIcon.innerHTML = '<i class="fa-solid fa-moon"></i>';
          } else {
            themeToggleIcon.innerHTML = '<i class="fa-solid fa-sun"></i>';
          }
        }

        // Set the icon based on the theme
        if (theme === 'dark' || (!theme && prefersDark)) {
          document.documentElement.classList.add('dark');
          setIcon('dark');
        } else {
          document.documentElement.classList.remove('dark');
          setIcon('light');
        }
      } catch (e) {
        console.error('Error setting theme or icon:', e);
      }
    })();
  </script>

  <style is:global>
    /* Styling the toggle button */
    .theme-toggle-btn {
      background-color: transparent; /* No background color to remove the grey box */
      border: none; /* No border */
      padding: 0.5rem; /* Add some padding for clickable area */
      border-radius: 50%; /* Circular button */
      transition: background-color 0.3s ease;
    }

    /* Add hover effect for the button */
    .theme-toggle-btn:hover {
      background-color: rgba(0, 0, 0, 0.05); /* Very subtle background on hover in light mode */
    }

    /* Dark mode toggle button hover effect */
    .dark .theme-toggle-btn:hover {
      background-color: rgba(255, 255, 255, 0.05); /* Very subtle background in dark mode */
    }

    /* Icon Styling */
    .theme-toggle-btn i {
      font-size: 1.5rem;
      transition: transform 0.3s ease, color 0.3s ease;
    }

    /* Add color transitions */
    .theme-toggle-btn i.fa-sun {
      color: #facc15; /* Yellow for the sun */
    }

    .theme-toggle-btn i.fa-moon {
      color: #60a5fa; /* Blue for the moon */
    }

    /* Hover effect */
    .theme-toggle-btn:hover i {
      transform: rotate(20deg) scale(1.1); /* Slight rotation and zoom on hover */
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.7); /* Glow effect */
    }

    /* Scale effect on click */
    .theme-toggle-btn:active i {
      transform: scale(0.9); /* Slight zoom in on click */
    }
  </style>
</header>
