---
import Layout from "../layouts/Layout.astro";
import Card from "../components/Card.astro"; // Ensure the Card component is imported
const user = Astro.locals.user;
const isAdmin = user?.isAdmin || false; // Determine if the user is an admin
---

<Layout title="Dashboard - FISA Portal">
  <!-- Header Section -->
  <header class="bg-gradient-to-r from-blue-800 to-blue-700 text-white py-12 sm:py-16 md:py-20">
    <div class="max-w-7xl mx-auto px-4 text-center">
      <h1 class="text-4xl sm:text-5xl font-extrabold mb-4 sm:mb-6 drop-shadow-md">
        Welcome, {user.email}!
        {isAdmin && <span class="ml-2 text-yellow-300">(Admin Access)</span>}
      </h1>
      <p class="text-base sm:text-lg md:text-xl max-w-2xl mx-auto">
        This is your dashboard. Manage your schoolâ€™s information and access key features.
      </p>
    </div>
  </header>

  <!-- Main Content -->
  <main class="bg-white dark:bg-gray-900 py-12 sm:py-16 md:py-20">
    <div class="max-w-7xl mx-auto px-4">
      <!-- User Dashboard Section -->
      <section class="text-center mb-12 sm:mb-16">
        <h2 class="text-2xl sm:text-3xl font-bold mb-4 sm:mb-6 text-blue-800 dark:text-white">
          Your Dashboard
        </h2>
        <p class="text-sm sm:text-base text-blue-600 dark:text-gray-300 max-w-2xl mx-auto">
          Access the different features available to you as a registered user of the FISA Portal.
        </p>
      </section>

      <!-- Grid for Cards (Conditional Display Based on Role) -->
      <ul role="list" class="grid grid-cols-1 md:grid-cols-3 gap-8 sm:gap-12 mx-auto max-w-4xl">
        <!-- Display all cards for admin users -->
        {isAdmin ? (
          <>
            <!-- Admin cards go here -->
          </>
        ) : (
          <!-- Client-specific invoice generation -->
          <div class="max-w-3xl mx-auto px-4 text-center">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
              <!-- FISA Fees Button -->
              <div class="p-6 bg-blue-50 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 space-y-4">
                <h3 class="text-2xl font-semibold text-blue-900">FISA Fees</h3>
                <p class="text-gray-700">Generate your FISA Fees invoice.</p>
                <a
                  href="/fisa-fees"
                  class="inline-block w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold py-2 px-6 rounded-lg shadow hover:bg-blue-700 transition-all"
                >
                  Generate FISA Fees
                </a>
              </div>

              <!-- Make A Future Button -->
              <div class="p-6 bg-blue-50 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 space-y-4">
                <h3 class="text-2xl font-semibold text-blue-900">Make A Future</h3>
                <p class="text-gray-700">Generate your Make A Future invoice.</p>
                <a
                  href="/makeafuture"
                  class="inline-block w-full bg-gradient-to-r from-green-500 to-green-600 text-white font-semibold py-2 px-6 rounded-lg shadow hover:bg-green-700 transition-all"
                >
                  Generate Make A Future
                </a>
              </div>

              <!-- My EDBC Button -->
              <div class="p-6 bg-blue-50 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 space-y-4">
                <h3 class="text-2xl font-semibold text-blue-900">My EDBC</h3>
                <p class="text-gray-700">Generate your My EDBC invoice.</p>
                <a
                  href="/myedbc"
                  class="inline-block w-full bg-gradient-to-r from-purple-500 to-purple-600 text-white font-semibold py-2 px-6 rounded-lg shadow hover:bg-purple-700 transition-all"
                >
                  Generate My EDBC
                </a>
              </div>
            </div>
          </div>
        )}
      </ul>
    </div>
  </main>
</Layout>
