---
import Layout from '../layouts/Layout.astro';

const user = Astro.locals.user;

const url = new URL(Astro.request.url);
const success = url.searchParams.get('success');
const error = url.searchParams.get('error');
---

<Layout title="Change Password - FISA Portal">
  <!-- Header Section -->
  <header class="bg-gradient-to-r from-blue-800 to-blue-700 text-white py-12 sm:py-16 md:py-20">
    <div class="max-w-7xl mx-auto px-4 text-center">
      <h1 class="text-4xl sm:text-5xl font-extrabold mb-4 sm:mb-6 drop-shadow-md">
        Change Your Password
      </h1>
      <p class="text-base sm:text-lg md:text-xl max-w-2xl mx-auto">
        Ensure your account security by updating your password regularly.
      </p>
    </div>
  </header>

  <!-- Main Content -->
  <main class="bg-white dark:bg-gray-900 py-12 sm:py-16 md:py-20">
    <div class="max-w-lg mx-auto px-4">
      {success && <p class="text-green-600 mb-4">{success}</p>}
      {error && <p class="text-red-600 mb-4">{decodeURIComponent(error)}</p>}
      <form
        action="/api/change-password"
        method="POST"
        class="bg-gray-100 dark:bg-gray-800 p-8 rounded-lg shadow-md"
      >
        <div class="mb-6">
          <label
            for="oldPassword"
            class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"
            >Current Password</label
          >
          <input
            type="password"
            name="oldPassword"
            id="oldPassword"
            required
            class="block w-full p-2.5 bg-white dark:bg-gray-700 border border-gray-300 rounded-lg text-gray-900 dark:text-white"
          />
        </div>
        <div class="mb-6">
          <label
            for="newPassword"
            class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"
            >New Password</label
          >
          <input
            type="password"
            name="newPassword"
            id="newPassword"
            required
            class="block w-full p-2.5 bg-white dark:bg-gray-700 border border-gray-300 rounded-lg text-gray-900 dark:text-white"
          />
        </div>
        <div class="mb-6">
          <label
            for="confirmPassword"
            class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"
            >Confirm New Password</label
          >
          <input
            type="password"
            name="confirmPassword"
            id="confirmPassword"
            required
            class="block w-full p-2.5 bg-white dark:bg-gray-700 border border-gray-300 rounded-lg text-gray-900 dark:text-white"
          />
        </div>
        <button
          type="submit"
          class="w-full bg-blue-700 hover:bg-blue-800 text-white font-medium rounded-lg text-sm px-5 py-2.5"
          >Update Password</button
        >
      </form>
    </div>
  </main>
</Layout>
